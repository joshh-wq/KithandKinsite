---
---

<section class="founding" id="founding">
  <div class="container">
    <div class="founding-card reveal">
      <div class="founding-badge">Limited to 100</div>
      <h2>Join the Founding 100</h2>
      <p class="founding-description">
        We are looking for the first 100 member-owners to help launch the Kith & Kin cooperative.
        For a one-time <strong>$50 founding share</strong>, you get a lifetime seat at the table,
        early beta access, and a vote in our first governance round.
      </p>

      <form class="founding-form" id="founding-form">
        <div class="form-row">
          <input
            type="email"
            name="email"
            id="founding-email"
            placeholder="you@example.com"
            required
          />
          <button type="submit" class="btn btn-primary">
            Become a Founding Member
          </button>
        </div>
        <p class="founding-note" id="founding-message">
          You'll receive details on how to complete your founding membership.
        </p>
      </form>

      <div class="founding-benefits">
        <div class="benefit">
          <span class="benefit-icon">&#10003;</span>
          <span>Lifetime membership</span>
        </div>
        <div class="benefit">
          <span class="benefit-icon">&#10003;</span>
          <span>Early beta access</span>
        </div>
        <div class="benefit">
          <span class="benefit-icon">&#10003;</span>
          <span>Voting rights</span>
        </div>
        <div class="benefit">
          <span class="benefit-icon">&#10003;</span>
          <span>Founding member badge</span>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .founding {
    background: linear-gradient(135deg, var(--sage) 0%, #4A5B44 100%);
    padding: var(--space-3xl) 0;
  }

  .founding-card {
    background: var(--white);
    border-radius: 1.5rem;
    padding: var(--space-2xl);
    max-width: 720px;
    margin: 0 auto;
    text-align: center;
    box-shadow: 0 25px 50px -12px rgba(31, 41, 33, 0.25);
  }

  .founding-badge {
    display: inline-block;
    background: var(--brown-light);
    color: var(--white);
    font-size: 0.875rem;
    font-weight: 600;
    padding: 0.375rem 1rem;
    border-radius: 2rem;
    margin-bottom: var(--space-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .founding h2 {
    margin-bottom: var(--space-md);
  }

  .founding-description {
    font-size: 1.125rem;
    line-height: 1.7;
    margin-bottom: var(--space-lg);
    max-width: 560px;
    margin-left: auto;
    margin-right: auto;
  }

  .founding-description strong {
    color: var(--sage);
  }

  .founding-form {
    margin-bottom: var(--space-lg);
  }

  .form-row {
    display: flex;
    gap: var(--space-sm);
    max-width: 500px;
    margin: 0 auto var(--space-sm);
  }

  .form-row input {
    flex: 1;
  }

  .form-row .btn {
    white-space: nowrap;
  }

  .founding-note {
    font-size: 0.875rem;
    color: var(--text-muted);
  }

  .founding-benefits {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--space-md) var(--space-lg);
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
  }

  .benefit {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9375rem;
    color: var(--text-muted);
  }

  .benefit-icon {
    color: var(--sage);
    font-weight: 700;
  }

  /* Success state */
  .founding-form.success .form-row {
    display: none;
  }

  .founding-form.success .founding-note {
    font-size: 1.125rem;
    color: var(--sage);
    font-weight: 500;
  }

  @media (max-width: 768px) {
    .founding-card {
      padding: var(--space-xl) var(--space-md);
    }

    .form-row {
      flex-direction: column;
    }

    .form-row .btn {
      width: 100%;
    }

    .founding-benefits {
      flex-direction: column;
      align-items: center;
      gap: var(--space-sm);
    }
  }
</style>

<script>
  const SUPABASE_URL = 'https://hlvsukzomtapqjkyncyd.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsdnN1a3pvbXRhcHFqa3luY3lkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNzQyMjgsImV4cCI6MjA4Mjk1MDIyOH0.yGZZ60pASf38rp1Ma4F9dImo50aUlvjyQSUhOsB1sSw';

  const form = document.getElementById('founding-form') as HTMLFormElement;
  const message = document.getElementById('founding-message') as HTMLElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const email = formData.get('email') as string;

    try {
      const response = await fetch(`${SUPABASE_URL}/rest/v1/waitlist`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'apikey': SUPABASE_ANON_KEY,
          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
          'Prefer': 'return=minimal',
        },
        body: JSON.stringify({ email, is_professional: false, is_founding_member: true }),
      });

      if (response.ok || response.status === 201) {
        form.classList.add('success');
        message.innerHTML = "Welcome to the Founding 100! Check your email for next steps.";
      } else if (response.status === 409) {
        form.classList.add('success');
        message.innerHTML = "You're already signed up! We'll be in touch soon.";
      } else {
        message.innerHTML = '<span style="color: var(--brown);">Something went wrong. Please try again.</span>';
      }
    } catch (error) {
      message.innerHTML = '<span style="color: var(--brown);">Something went wrong. Please try again.</span>';
    }
  });
</script>
